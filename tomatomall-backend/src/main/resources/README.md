功能说明文档
功能概述
本文档主要介绍用户在店铺管理相关操作中的功能实现，包括用户申请成为店员、店主同意或拒绝店员申请、用户申请开店、店主同意或拒绝开店申请，以及用户查询收发消息等功能。
功能实现
用户申请成为店员
实现方法：
修改数据库accounts表，将对应用户的shop_id字段更新为申请加入的商店id。
根据商店id查询店主id，向店主发送一条消息，内容为“有新的员工申请”，接收方id为店主id。
实现思路：
接收用户提交的申请成为店员的请求，获取用户id和申请加入的商店id。
执行数据库更新操作，修改accounts表中对应用户记录的shop_id字段。
查询商店表，根据商店id找到对应的店主id。
调用消息发送接口，将申请消息发送给店主。
店主同意用户成为店员
实现方法：
修改数据库accounts表，将对应用户的is_valid_staff字段改为1，role字段改为STAFF。
向申请的店员发送消息，内容为“您的申请已经通过”，接收方id为店员id。
实现思路：
接收店主同意店员申请的操作请求，获取店员id。
执行数据库更新操作，修改accounts表中对应店员记录的is_valid_staff和role字段。
调用消息发送接口，将通过消息发送给店员。
店主不同意用户成为店员
实现方法：
删除数据库accounts表中对应用户的shop_id字段值。
向申请的店员发送消息，内容为“您的申请未通过”，接收方id为店员id。
实现思路：
接收店主拒绝店员申请的操作请求，获取店员id。
执行数据库更新操作，删除accounts表中对应店员记录的shop_id字段值。
调用消息发送接口，将未通过消息发送给店员。
用户申请开店
实现方法：
在数据库中创建一个新的商店记录，is_valid字段初始值为0。
向用户发送消息，内容与上述申请成为店员时发送给店主的消息类似，告知用户开店申请已提交。
实现思路：
接收用户提交的申请开店请求，获取用户id等相关信息。
执行数据库插入操作，创建新的商店记录，并设置is_valid字段为0。
调用消息发送接口，将申请消息发送给用户。
店主同意用户开店
实现方法：
修改数据库中对应商店记录的is_valid字段为1。
修改用户在accounts表中的role字段为店主对应的role值。
向用户发送消息，告知其开店申请已通过。
实现思路：
接收店主同意开店申请的操作请求，获取商店id和用户id。
执行数据库更新操作，修改商店记录的is_valid字段和用户记录的role字段。
调用消息发送接口，将通过消息发送给用户。
店主不同意用户开店
实现方法：
向用户发送消息，告知其开店申请未通过。
删除数据库中对应的商店记录。
实现思路：
接收店主拒绝开店申请的操作请求，获取商店id和用户id。
执行数据库删除操作，删除对应的商店记录。
调用消息发送接口，将未通过消息发送给用户。
用户查询收到的消息
实现方法：
查询数据库消息表，获取当前用户作为接收方的所有消息记录。
将查询到的消息按照时间顺序等规则进行排序后返回给用户。
实现思路：
接收用户查询收到消息的请求，获取用户id。
执行数据库查询操作，从消息表中筛选出接收方id为当前用户id的消息记录。
对查询结果进行处理和排序，然后返回给用户。
用户查询发出的消息
实现方法：
查询数据库消息表，获取当前用户作为发送方的所有消息记录。
将查询到的消息按照时间顺序等规则进行排序后返回给用户。
实现思路：
接收用户查询发出消息的请求，获取用户id。
执行数据库查询操作，从消息表中筛选出发送方id为当前用户id的消息记录。
对查询结果进行处理和排序，然后返回给用户。